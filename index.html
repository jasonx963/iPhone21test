<!doctype html>
<html lang="es-MX">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>MegaOferta – iPhone (Estilo PDD)</title>
  <meta name="color-scheme" content="light only">
  <style>
    :root{
      --brand:#db2b2b;
      --brand-dark:#c52020;
      --pill:#9e2626;
      --card:#f04b4b22;
      --text:#fff7f7;
      --hint:#ffe4e6;
      --chip:#fff5f5;
      --chip-text:#7a2222;
      --border:rgba(255,255,255,.28);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
      background:var(--brand);
      color:var(--text);
    }
    a{color:inherit;text-decoration:none}
    .container{max-width:1180px;margin:0 auto;padding:0 16px}
    header{
      border-bottom:1px solid var(--border);
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,0));
    }
    .topbar{display:flex;align-items:center;justify-content:space-between;height:56px;gap:12px}
    .logo{font-weight:900;font-size:22px;letter-spacing:.5px}
    .nav{display:flex;gap:10px}
    .nav a{padding:8px 12px;border-radius:999px;background:rgba(255,255,255,.08)}
    .nav a:hover{background:rgba(255,255,255,.16)}
    /* hero */
    .hero{display:grid;grid-template-columns:1.05fr .95fr;gap:22px;padding:24px 0}
    .badge{display:inline-block;background:#ffd1d1;color:#a31414;border-radius:999px;font-weight:800;padding:4px 10px;margin-bottom:10px}
    h1{font-size:48px;line-height:1.08;margin:8px 0 10px}
    .sub{font-size:36px;color:#fff37a;font-weight:900;margin:8px 0 8px}
    .desc{opacity:.92}
    .pillbar{display:flex;gap:10px;margin-top:14px}
    .pill{background:var(--pill);border:1px solid var(--border);padding:8px 12px;border-radius:10px}
    .countdown{display:flex;align-items:center;gap:12px;margin:18px 0}
    .cd-item{background:rgba(0,0,0,.2);padding:10px 12px;border-radius:12px;font-size:24px;font-weight:900}
    .users{background:rgba(255,255,255,.14);padding:10px 12px;border-radius:12px;font-weight:800}
    .hero-card{background:#fff;border-radius:22px;overflow:hidden;box-shadow:0 12px 40px rgba(0,0,0,.22)}
    .hero-card img{width:100%;display:block;height:auto}
    /* 颜色选择 */
    .picker{margin-top:12px;display:flex;flex-wrap:wrap;gap:8px}
    .chip{background:var(--chip);color:var(--chip-text);border:1px solid #ffd4d4;padding:6px 10px;border-radius:999px;font-weight:800;cursor:pointer}
    .chip.active{background:#fff;color:#a31414;box-shadow:0 0 0 3px rgba(255,255,255,.28) inset}
    /* 价格/CTA */
    .cta{display:flex;align-items:center;gap:12px;margin-top:12px}
    .price{font-size:26px;font-weight:900}
    .btn{background:#fff;color:#b31313;border-radius:12px;padding:10px 16px;font-weight:900;border:none;cursor:pointer}
    .btn:hover{background:#ffecec}
    /* 播报区域（移到左侧大卡片下方） */
    .feed-box{margin-top:16px;background:rgba(255,255,255,.08);border:1px solid var(--border);border-radius:16px;padding:10px 0;overflow:hidden}
    .ticker{overflow:hidden;white-space:nowrap}
    #tickerText{display:inline-block;will-change:transform;padding-left:100%}
    /* 底部推荐商品可以继续加，这里省略 */
    @media (max-width:980px){
      .hero{grid-template-columns:1fr;gap:16px}
      h1{font-size:36px}
      .sub{font-size:28px}
    }
  </style>
</head>
<body>
  <header>
    <div class="container topbar">
      <div class="logo">MegaOferta</div>
      <nav class="nav">
        <a href="#orders">Centro de pedidos</a>
        <a href="#support">Servicio al cliente</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <!-- HERO：左文右图 -->
    <section class="hero">
      <!-- 左侧文字区 -->
      <div>
        <span class="badge">拼多多风</span>
        <h1>iPhone 16 / Pro / Pro Max</h1>
        <div class="sub">¡Hoy mitad de precio, oferta por tiempo limitado!</div>
        <div class="desc">Garantía oficial · Envío rápido · Soporte de rastreo</div>

        <div class="pillbar">
          <div class="pill">Pago seguro</div>
          <div class="pill">Devolución 7 días</div>
          <div class="pill">Envío 24–48h</div>
        </div>

        <div class="countdown">
          <span>Termina en</span>
          <span class="cd-item" id="cd-h">00</span>
          <span>:</span>
          <span class="cd-item" id="cd-m">00</span>
          <span>:</span>
          <span class="cd-item" id="cd-s">00</span>
          <span class="users">Miles comprando ahora</span>
        </div>

        <!-- 颜色选择 & 价格 & 按钮（主打机型：16 Pro Max） -->
        <div>
          <div style="font-weight:900;margin:8px 0 6px">iPhone 16 Pro Max</div>
          <div class="picker" id="picker-16pm"></div>
          <div class="cta">
            <div class="price" id="price-16pm"></div>
            <button class="btn" onclick="scrollToComprar()">Comprar ahora</button>
          </div>
        </div>

        <!-- 播报栏：放在这里（你截图中下方黑框） -->
        <div class="feed-box">
          <div class="ticker"><span id="tickerText">Cargando compras recientes…</span></div>
        </div>
      </div>

      <!-- 右侧大图 -->
      <div class="hero-card">
        <img id="img-16pm" alt="iPhone 16 Pro Max">
      </div>
    </section>

    <!-- 这里可以继续放其它产品块（16 Pro / 16 Plus / 16），为简洁本文只做主打及图片映射 -->
  </main>

  <script>
  /*** 金额（MXN） ***/
  const fmtMXN = v => new Intl.NumberFormat('es-MX', { style:'currency', currency:'MXN' }).format(v);

  /*** 主打机型价格（可改） ***/
  const price_16pm = 25999; // 示例价，单位 MXN
  document.getElementById('price-16pm').textContent = fmtMXN(price_16pm);

  /*** 倒计时（到今天 23:59:59） ***/
  function tick(){
    const end = new Date();
    end.setHours(23,59,59,999);
    const now = new Date();
    let s = Math.max(0, Math.floor((end-now)/1000));
    const h = String(Math.floor(s/3600)).padStart(2,'0'); s%=3600;
    const m = String(Math.floor(s/60)).padStart(2,'0'); s%=60;
    const ss = String(s).padStart(2,'0');
    document.getElementById('cd-h').textContent = h;
    document.getElementById('cd-m').textContent = m;
    document.getElementById('cd-s').textContent = ss;
  }
  tick(); setInterval(tick, 1000);

  /*** 颜色 → 图片映射（用你提供的全部官方链接） ***/
  const IMG = {
    "16 Pro Max": {
      main: "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone16promax-digitalmat-gallery-1-202409?wid=728&hei=666&fmt=p-jpg&qlt=95&.v=SVFEakZLb0txZU1GR245ZlA3VVcxa2EvQmI5ZjZseVhPSEJZVkYxZ09JdUo0TmlJKzFsSE1Jbm9qdjlFSGFVQnhaVXN2UmVLZWxyY01GTDZmcDYxbjB2aHJVVVRvS3hUQ0EwVk8wak9Ka0VUb3QzNWdGeS9xM3ZrbnZQcHJVdlY",
      colors: {
        "Desert Titanium": [
          "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-16-pro-finish-select-202409-6-9inch-deserttitanium?wid=5120&hei=2880&fmt=webp&qlt=90&.v=eUdsd0dIb3VUOXdtWkY0VFUwVE8vbEdkZHNlSjBQRklnaFB2d3I5MW94NW9lRVVkRmJ5ZE03VysydEdnMXpSNEY3eHJKR1hDaEJCS2hmc2czazlldHlSTUMybCtXNXZpclhWeFpYZUcvRk9MMGVHUi8weFBYOEFFYUZVbWVJS0xUeEZnNlNyc3llcmZiYmQ5TGppeHJ3&traceId=1",
          "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-16-pro-finish-select-202409-6-9inch-deserttitanium_AV1?wid=5120&hei=2880&fmt=webp&qlt=90&.v=eUdsd0dIb3VUOXdtWkY0VFUwVE8vbEdkZHNlSjBQRklnaFB2d3I5MW94NW9lRVVkRmJ5ZE03VysydEdnMXpSNCtvdWdQMWpIV2NFaHUyTjZvK3ozWmRJVUY1eklwSElSL2pyWFgySnpoc1FWYUQyemVEUlZ1WEdDVXExYzQ2eVNCZk81SjNVTG9zc1RWN0ZXVGFzaFVuNXFNVzc5YkZmK2I4YzJ4ZndkZUdj&traceId=1",
          "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-16-pro-finish-select-202409-6-9inch-deserttitanium_AV2?wid=5120&hei=2880&fmt=webp&qlt=90&.v=eUdsd0dIb3VUOXdtWkY0VFUwVE8vbEdkZHNlSjBQRklnaFB2d3I5MW94NW9lRVVkRmJ5ZE03VysydEdnMXpSNEN0Mk9PSnZhL2dGRjMvR25CcGJsdDlJVUY1eklwSElSL2pyWFgySnpoc1FWYUQyemVEUlZ1WEdDVXExYzQ2eVNQZ0YzUGN0SVhHczl1WS9uUjcxdmxuNXFNVzc5YkZmK2I4YzJ4ZndkZUdj&traceId=1",
          "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-16-pro-finish-select-202409-6-9inch-deserttitanium_AV3?wid=5120&hei=2880&fmt=webp&qlt=90&.v=eUdsd0dIb3VUOXdtWkY0VFUwVE8vbEdkZHNlSjBQRklnaFB2d3I5MW94NW9lRVVkRmJ5ZE03VysydEdnMXpSNDVST0FtSnQrc0g3M1p4WG5lNzRDb05JVUY1eklwSElSL2pyWFgySnpoc1FWYUQyemVEUlZ1WEdDVXExYzQ2eVNwby95YWVuVDdVVzVEM1gvSzBtN0UzNXFNVzc5YkZmK2I4YzJ4ZndkZUdj&traceId=1"
        ],
        "Natural Titanium": [
          "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-16-pro-finish-select-202409-6-9inch-naturaltitanium?wid=5120&hei=2880&fmt=webp&qlt=90&.v=eUdsd0dIb3VUOXdtWkY0VFUwVE8vbEdkZHNlSjBQRklnaFB2d3I5MW94NkkwYXJHRXdBd0xZTDNUS0M2eUNlY0pOZTBYalh5Vk90cEc1K2wwRzFGejRMeXJHUnUva2huMjl4akFHOXNwVjFOU1YvbEhQdCtlZmMrckc2K3RtQzR6UkM0eXdTUkFqNnFqYk5ZcGUzV2tB&traceId=1"
        ],
        "White Titanium": [
          "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-16-pro-finish-select-202409-6-9inch-whitetitanium?wid=5120&hei=2880&fmt=webp&qlt=90&.v=eUdsd0dIb3VUOXdtWkY0VFUwVE8vbEdkZHNlSjBQRklnaFB2d3I5MW94NVZBWnFueTF0UVNJeGtTZTdkUklJWmlCQmV2WTA2cncybDF2YzFnKzI0S2prMCtUNWwzYWR0UVU3TWVsbEdUeXV0dnhVVHVwTllva0RRUVdaK0xFNFBtRngzMXVwQnlNRVZFUUhmek1wL0NR&traceId=1"
        ],
        "Black Titanium": [
          "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone-16-pro-finish-select-202409-6-9inch-blacktitanium?wid=5120&hei=2880&fmt=webp&qlt=90&.v=eUdsd0dIb3VUOXdtWkY0VFUwVE8vbEdkZHNlSjBQRklnaFB2d3I5MW94NlcvVjg4Q2h4WWRjcFAyYlBrM0N1bGlCQmV2WTA2cncybDF2YzFnKzI0S2prMCtUNWwzYWR0UVU3TWVsbEdUeXV0dnhVVHVwTllva0RRUVdaK0xFNFBqb3p6Q2ZyUTlqTERzaHFUOVhnZGR3&traceId=1"
        ]
      }
    },
    /* 其它机型也准备了映射，如需后续在页面里展示可用同样方式接上 */
    "16 Pro": {
      main: "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone16pro-digitalmat-gallery-1-202409?wid=728&hei=666&fmt=p-jpg&qlt=95&.v=VWJuckJvbkZqeTMwRFJZSHhSVnN1OVRBZjJveUdyMFM0Z0dEYTB4Rzh1RDBVMUIwNFV6MXNoZGhsYWgvZGlmdEJnNER5bEtzeFpoMTlNVnpVcXBTR0NDaXNCSFl3ajdkc3ZBMkZreEM2YjNZV0hWeXdKNnBTeStXSklkb1ZqKzc"
    },
    "16 Plus": {
      main: "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone16plus-digitalmat-gallery-1-202409?wid=728&hei=666&fmt=p-jpg&qlt=95&.v=MnlDYTQ3WEQ0bGtBK01PRDByZUlBZDFla0N0Znl3UThxdjB3SW91ZDVJeVVkS01rMzNBdC9ob3gzakFXNEdxNW8xUkhYejcxalRvY0FPQVpMcmoxMDQvalVFTGdPUU1VQnQ4YTRLRW0yaHFtWDk2WmZnUzQ0U2grTk9ReFlMK0E"
    },
    "16": {
      main: "https://store.storeimages.cdn-apple.com/1/as-images.apple.com/is/iphone16-digitalmat-gallery-1-202409?wid=728&hei=666&fmt=p-jpg&qlt=95&.v=Y2tBd1RqSzMrd3hScm1lN290ZENDS041dXh2MUpWOGFNK2V6eVg1VGV3OHlLZ0xXbFByV2Vvak9rWndaamlPU3cvMldkdDlIc0lud2tjcDJ3djFCUkV2dGpWUjV5VzZtaGp2QjBiUXR3RUFOM1EvNmN2VndPa21RenM3N2pucTg"
    }
  };

  /* 初始化主图 & 颜色 Chip */
  const img16pm = document.getElementById('img-16pm');
  img16pm.src = IMG["16 Pro Max"].main;

  const picker = document.getElementById('picker-16pm');
  const colorNames = Object.keys(IMG["16 Pro Max"].colors);
  colorNames.forEach((name, idx) => {
    const btn = document.createElement('button');
    btn.className = 'chip' + (idx===0?' active':'');
    btn.textContent = name;
    btn.onclick = () => {
      [...picker.children].forEach(c=>c.classList.remove('active'));
      btn.classList.add('active');
      img16pm.src = IMG["16 Pro Max"].colors[name][0] || IMG["16 Pro Max"].main;
    };
    picker.appendChild(btn);
  });

  /*** 滚动播报 ***/
  async function loadTicker(){
    try{
      const res = await fetch('/api/feed',{cache:'no-store'});
      const data = await res.json();
      const el = document.getElementById('tickerText');
      if (!data || data.ok !== true || !Array.isArray(data.items) || !data.items.length){
        el.textContent = 'No hay compras recientes, vuelve a intentarlo pronto…';
        return;
      }
      const lines = data.items.map(o=>{
        const when = (o.updatedAt||'').slice(5,16).replace(' ',' ');
        // 例： 【08-19 12:31】Juan compra iPhone 16 Pro Max (Desert Titanium) ×1 ，precio MXN 25,999 ，tel ※※※※※※817
        return `【${when}】${o.name} compra ${o.product}${o.color?(' ('+o.color+')'):''} ×${o.qty||1} ，precio ${o.price?fmtMXN(Number(o.price)):fmtMXN(0)} ，tel ${o.phoneMasked}${o.carrier?('，envío '+o.carrier):''}${o.trackingMasked?('（número '+o.trackingMasked+'）'):''}`;
      });
      el.textContent = lines.join('　|　');
      // 跑马灯动画
      let off = 0;
      setInterval(()=>{ off=(off+1)%60000; el.style.transform = `translateX(${-off}px)`; }, 30);
    }catch(e){
      const el = document.getElementById('tickerText');
      el.textContent = 'No se puede cargar la transmisión de compras';
    }
  }
  loadTicker();
  setInterval(loadTicker, 60000);

  function scrollToComprar(){
    window.location.hash = '#orders';
  }
  </script>
</body>
</html>
